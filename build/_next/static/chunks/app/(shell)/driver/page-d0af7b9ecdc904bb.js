(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[839],{2948:(e,t,r)=>{Promise.resolve().then(r.bind(r,5631))},3827:(e,t,r)=>{"use strict";r.d(t,{Provider:()=>c,B:()=>u,P:()=>m});var a=r(4248),n=r(4564);let i=[{id:"u1",name:"Mar\xeda L\xf3pez",balance:15.5}],d=[{id:"t1",type:"ride",label:"Viaje Corredor Azul",amount:-2.5,date:"2025-10-09 08:21"},{id:"t2",type:"topup",label:"Recarga tarjeta",amount:10,date:"2025-10-08 19:02"}],l=[{id:"b102",plate:"ABC-102",route:"Corredor Azul",driverId:"d1",status:"Activo",pos:{x:25,y:40}},{id:"b207",plate:"XYZ-207",route:"Corredor Rojo",driverId:"d2",status:"Activo",pos:{x:60,y:55}},{id:"b312",plate:"LMN-312",route:"Alimentador Norte",driverId:null,status:"Inactivo",pos:{x:75,y:20}}],o=[{id:"d1",name:"Juan P\xe9rez",unitId:"b102",onShift:!1},{id:"d2",name:"Ana Torres",unitId:"b207",onShift:!0},{id:"d3",name:"Luis Ramos",unitId:null,onShift:!1}];function u(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"id",[t,r]=(0,n.useState)(0);return()=>(r(e=>e+1),"".concat(e,"-").concat(t+1))}let s=(0,n.createContext)(null);function c(e){let{children:t}=e,[r,u]=(0,n.useState)(i[0]),[c,m]=(0,n.useState)(d),[v]=(0,n.useState)(l),[f,h]=(0,n.useState)(o),[b,p]=(0,n.useState)(null),x=e=>u(t=>({...t,balance:Number(e.toFixed(2))})),I=e=>m(t=>[e,...t].slice(0,20)),S=e=>{let t=f.find(t=>t.id===e)||f[0],r=v.find(e=>{var r;return e.id===(null!=(r=t.unitId)?r:v[0].id)})||v[0],a=r.route;h(e=>e.map(e=>e.id===t.id?{...e,onShift:!0,unitId:r.id}:e)),p({driverId:t.id,unitId:r.id,route:a,startedAt:new Date().toISOString(),fares:[{label:"General",amount:2.5},{label:"Universitario",amount:1.25},{label:"Escolar",amount:1}],transactions:[]})},N=()=>{var e,t;let r=null!=(e=null==b?void 0:b.transactions.reduce((e,t)=>e+(t.amount>0?t.amount:0),0))?e:0,a=null!=(t=null==b?void 0:b.transactions.length)?t:0;return h(e=>e.map(e=>e.id===(null==b?void 0:b.driverId)?{...e,onShift:!1}:e)),p(null),{total:r,count:a}},C=(0,n.useMemo)(()=>({user:r,activity:c,setBalance:x,addActivity:I,buses:v,drivers:f,driverSession:b,startShift:S,endShift:N}),[r,c,v,f,b,S,N]);return(0,a.jsx)(s.Provider,{value:C,children:t})}let m=()=>{let e=(0,n.useContext)(s);if(!e)throw Error("Store missing Provider");return e}},5631:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>l});var a=r(4248),n=r(7642),i=r.n(n),d=r(3827);function l(){let{driverSession:e}=(0,d.P)();return(0,a.jsxs)("div",{className:"max-w-xl mx-auto card p-6 space-y-4",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold",children:"Conductor"}),e?(0,a.jsx)(i(),{className:"btn w-full",href:"/driver/session/",children:"Ir a Jornada"}):(0,a.jsx)(i(),{className:"btn w-full",href:"/driver/session/",children:"Iniciar Jornada"})]})}}},e=>{e.O(0,[642,647,516,358],()=>e(e.s=2948)),_N_E=e.O()}]);