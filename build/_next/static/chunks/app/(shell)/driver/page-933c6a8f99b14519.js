(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[839],{2948:(e,t,r)=>{Promise.resolve().then(r.bind(r,5631))},3827:(e,t,r)=>{"use strict";r.d(t,{Provider:()=>c,B:()=>o,P:()=>m});var a=r(4248),n=r(4564);let i=[{id:"u1",name:"Mar\xeda L\xf3pez",balance:15.5}],l=[{id:"t1",type:"ride",label:"Viaje Corredor Azul",amount:-2.5,date:"2025-10-09 08:21"},{id:"t2",type:"topup",label:"Recarga tarjeta",amount:10,date:"2025-10-08 19:02"}],u=[{id:"b102",plate:"ABC-102",route:"Corredor Azul",driverId:"d1",status:"Activo",pos:{x:25,y:40}},{id:"b207",plate:"XYZ-207",route:"Corredor Rojo",driverId:"d2",status:"Activo",pos:{x:60,y:55}},{id:"b312",plate:"LMN-312",route:"Alimentador Norte",driverId:null,status:"Inactivo",pos:{x:75,y:20}}],d=[{id:"d1",name:"Juan P\xe9rez",unitId:"b102",onShift:!1},{id:"d2",name:"Ana Torres",unitId:"b207",onShift:!0},{id:"d3",name:"Luis Ramos",unitId:null,onShift:!1}];function o(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"id",t=(0,n.useRef)(0);return(0,n.useCallback)(()=>{let r="".concat(e,"-").concat(t.current);return t.current+=1,r},[e])}let s=(0,n.createContext)(null);function c(e){let{children:t}=e,[r,o]=(0,n.useState)(i[0]),[c,m]=(0,n.useState)(l),b=(0,n.useRef)(u),[f,v]=(0,n.useState)(d),[h,p]=(0,n.useState)(null),x=(0,n.useCallback)(e=>{o(t=>({...t,balance:Number(e.toFixed(2))}))},[]),I=(0,n.useCallback)(e=>{m(t=>[e,...t].slice(0,20))},[]),C=(0,n.useCallback)(e=>{v(t=>{let r=t.find(t=>t.id===e)||t[0],a=b.current.find(e=>{var t;return e.id===(null!=(t=r.unitId)?t:b.current[0].id)})||b.current[0],n=a.route;return p({driverId:r.id,unitId:a.id,route:n,startedAt:new Date().toISOString(),fares:[{label:"General",amount:2.5},{label:"Universitario",amount:1.25},{label:"Escolar",amount:1}],transactions:[]}),t.map(e=>e.id===r.id?{...e,onShift:!0,unitId:a.id}:e)})},[]),S=(0,n.useCallback)(()=>{let e={total:0,count:0};return p(t=>(t&&(e.total=t.transactions.reduce((e,t)=>e+(t.amount>0?t.amount:0),0),e.count=t.transactions.length,v(e=>e.map(e=>e.id===t.driverId?{...e,onShift:!1}:e))),null)),e},[]),N=(0,n.useMemo)(()=>({user:r,activity:c,setBalance:x,addActivity:I,buses:b.current,drivers:f,driverSession:h,startShift:C,endShift:S}),[r,c,f,h,x,I,C,S]);return(0,a.jsx)(s.Provider,{value:N,children:t})}let m=()=>{let e=(0,n.useContext)(s);if(!e)throw Error("Store missing Provider");return e}},5631:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>u});var a=r(4248),n=r(7642),i=r.n(n),l=r(3827);function u(){let{driverSession:e}=(0,l.P)();return(0,a.jsxs)("div",{className:"max-w-xl mx-auto card p-6 space-y-4",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold",children:"Conductor"}),e?(0,a.jsx)(i(),{className:"btn w-full",href:"/driver/session/",children:"Ir a Jornada"}):(0,a.jsx)(i(),{className:"btn w-full",href:"/driver/session/",children:"Iniciar Jornada"})]})}}},e=>{e.O(0,[642,647,516,358],()=>e(e.s=2948)),_N_E=e.O()}]);