(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[232],{2895:(e,t,r)=>{Promise.resolve().then(r.bind(r,5168))},3827:(e,t,r)=>{"use strict";r.d(t,{Provider:()=>u,B:()=>c,P:()=>h});var a=r(4248),s=r(4564);let n=[{id:"u1",name:"Mar\xeda L\xf3pez",balance:15.5}],d=[{id:"t1",type:"ride",label:"Viaje Corredor Azul",amount:-2.5,date:"2025-10-09 08:21"},{id:"t2",type:"topup",label:"Recarga tarjeta",amount:10,date:"2025-10-08 19:02"}],l=[{id:"b102",plate:"ABC-102",route:"Corredor Azul",driverId:"d1",status:"Activo",pos:{x:25,y:40}},{id:"b207",plate:"XYZ-207",route:"Corredor Rojo",driverId:"d2",status:"Activo",pos:{x:60,y:55}},{id:"b312",plate:"LMN-312",route:"Alimentador Norte",driverId:null,status:"Inactivo",pos:{x:75,y:20}}],i=[{id:"d1",name:"Juan P\xe9rez",unitId:"b102",onShift:!1},{id:"d2",name:"Ana Torres",unitId:"b207",onShift:!0},{id:"d3",name:"Luis Ramos",unitId:null,onShift:!1}];function c(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"id",t=(0,s.useRef)(0);return(0,s.useCallback)(()=>{let r="".concat(e,"-").concat(t.current);return t.current+=1,r},[e])}let o=(0,s.createContext)(null);function u(e){let{children:t}=e,[r,c]=(0,s.useState)(n[0]),[u,h]=(0,s.useState)(d),x=(0,s.useRef)(l),[j,b]=(0,s.useState)(i),[m,v]=(0,s.useState)(null),f=(0,s.useCallback)(e=>{c(t=>({...t,balance:Number(e.toFixed(2))}))},[]),p=(0,s.useCallback)(e=>{h(t=>[e,...t].slice(0,20))},[]),N=(0,s.useCallback)(e=>{b(t=>{let r=t.find(t=>t.id===e)||t[0],a=x.current.find(e=>{var t;return e.id===(null!=(t=r.unitId)?t:x.current[0].id)})||x.current[0],s=a.route;return v({driverId:r.id,unitId:a.id,route:s,startedAt:new Date().toISOString(),fares:[{label:"General",amount:2.5},{label:"Universitario",amount:1.25},{label:"Escolar",amount:1}],transactions:[]}),t.map(e=>e.id===r.id?{...e,onShift:!0,unitId:a.id}:e)})},[]),g=(0,s.useCallback)(()=>{let e={total:0,count:0};return v(t=>(t&&(e.total=t.transactions.reduce((e,t)=>e+(t.amount>0?t.amount:0),0),e.count=t.transactions.length,b(e=>e.map(e=>e.id===t.driverId?{...e,onShift:!1}:e))),null)),e},[]),C=(0,s.useMemo)(()=>({user:r,activity:u,setBalance:f,addActivity:p,buses:x.current,drivers:j,driverSession:m,startShift:N,endShift:g}),[r,u,j,m,f,p,N,g]);return(0,a.jsx)(o.Provider,{value:C,children:t})}let h=()=>{let e=(0,s.useContext)(o);if(!e)throw Error("Store missing Provider");return e}},5168:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>d});var a=r(4248),s=r(3827);function n(e){let{label:t,value:r}=e;return(0,a.jsxs)("div",{className:"card p-4",children:[(0,a.jsx)("div",{className:"text-xs text-gray-500",children:t}),(0,a.jsx)("div",{className:"text-2xl font-semibold",children:r})]})}function d(){let{buses:e,drivers:t}=(0,s.P)(),r=t.reduce((e,t)=>e+50*!!t.onShift,0),d=e.filter(e=>"Activo"===e.status).length,l=t.filter(e=>e.onShift).length;return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid md:grid-cols-4 gap-4",children:[(0,a.jsx)(n,{label:"Ingresos Totales del D\xeda",value:"S/ ".concat(r.toFixed(2))}),(0,a.jsx)(n,{label:"Unidades Activas",value:"".concat(d)}),(0,a.jsx)(n,{label:"Conductores en Ruta",value:"".concat(l)}),(0,a.jsx)(n,{label:"Total de Pasajeros Hoy",value:"".concat(40*l)})]}),(0,a.jsxs)("div",{className:"card p-4 overflow-x-auto",children:[(0,a.jsx)("h3",{className:"font-semibold mb-3",children:"Gesti\xf3n de Flota"}),(0,a.jsxs)("table",{className:"table",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{children:"Estado"}),(0,a.jsx)("th",{children:"Acciones"}),(0,a.jsx)("th",{children:"ID Unidad"}),(0,a.jsx)("th",{children:"Placa"}),(0,a.jsx)("th",{children:"Ruta"}),(0,a.jsx)("th",{children:"Conductor"})]})}),(0,a.jsx)("tbody",{children:e.map(e=>{var t;return(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{children:e.id}),(0,a.jsx)("td",{children:e.plate}),(0,a.jsx)("td",{children:e.route}),(0,a.jsx)("td",{children:null!=(t=e.driverId)?t:"—"}),(0,a.jsx)("td",{children:(0,a.jsx)("span",{className:"badge ".concat("Activo"===e.status?"border-green-300 text-green-700":"border-gray-300 text-gray-600"),children:e.status})}),(0,a.jsxs)("td",{className:"space-x-2",children:[(0,a.jsx)("button",{className:"btn-outline",children:"Ver Detalles"}),(0,a.jsx)("button",{className:"btn-outline",children:"Asignar Conductor"})]})]},e.id)})})]})]}),(0,a.jsxs)("div",{className:"card p-4 overflow-x-auto",children:[(0,a.jsx)("h3",{className:"font-semibold mb-3",children:"Gesti\xf3n de Conductores"}),(0,a.jsxs)("table",{className:"table",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{children:"ID Conductor"}),(0,a.jsx)("th",{children:"Nombre"}),(0,a.jsx)("th",{children:"Unidad Asignada"}),(0,a.jsx)("th",{children:"Estado"}),(0,a.jsx)("th",{children:"Acciones"})]})}),(0,a.jsx)("tbody",{children:t.map(e=>{var t;return(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{children:e.id}),(0,a.jsx)("td",{children:e.name}),(0,a.jsx)("td",{children:null!=(t=e.unitId)?t:"—"}),(0,a.jsx)("td",{children:(0,a.jsx)("span",{className:"badge ".concat(e.onShift?"border-emerald-300text-emerald-700":"border-gray-300 text-gray-600"),children:e.onShift?"EnJornada":"Fuera de Servicio"})}),(0,a.jsxs)("td",{className:"space-x-2",children:[(0,a.jsx)("button",{className:"btn-outline",children:"Ver Perfil"}),(0,a.jsx)("button",{className:"btn-outline",children:"Editar"})]})]},e.id)})})]})]})]})}}},e=>{e.O(0,[647,516,358],()=>e(e.s=2895)),_N_E=e.O()}]);