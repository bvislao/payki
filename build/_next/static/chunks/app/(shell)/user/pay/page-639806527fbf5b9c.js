(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[351],{3450:(e,t,r)=>{Promise.resolve().then(r.bind(r,8211))},3827:(e,t,r)=>{"use strict";r.d(t,{Provider:()=>u,B:()=>d,P:()=>m});var a=r(4248),l=r(4564);let n=[{id:"u1",name:"Mar\xeda L\xf3pez",balance:15.5}],i=[{id:"t1",type:"ride",label:"Viaje Corredor Azul",amount:-2.5,date:"2025-10-09 08:21"},{id:"t2",type:"topup",label:"Recarga tarjeta",amount:10,date:"2025-10-08 19:02"}],s=[{id:"b102",plate:"ABC-102",route:"Corredor Azul",driverId:"d1",status:"Activo",pos:{x:25,y:40}},{id:"b207",plate:"XYZ-207",route:"Corredor Rojo",driverId:"d2",status:"Activo",pos:{x:60,y:55}},{id:"b312",plate:"LMN-312",route:"Alimentador Norte",driverId:null,status:"Inactivo",pos:{x:75,y:20}}],o=[{id:"d1",name:"Juan P\xe9rez",unitId:"b102",onShift:!1},{id:"d2",name:"Ana Torres",unitId:"b207",onShift:!0},{id:"d3",name:"Luis Ramos",unitId:null,onShift:!1}];function d(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"id",t=(0,l.useRef)(0);return(0,l.useCallback)(()=>{let r="".concat(e,"-").concat(t.current);return t.current+=1,r},[e])}let c=(0,l.createContext)(null);function u(e){let{children:t}=e,[r,d]=(0,l.useState)(n[0]),[u,m]=(0,l.useState)(i),h=(0,l.useRef)(s),[p,f]=(0,l.useState)(o),[b,x]=(0,l.useState)(null),v=(0,l.useCallback)(e=>{d(t=>({...t,balance:Number(e.toFixed(2))}))},[]),g=(0,l.useCallback)(e=>{m(t=>[e,...t].slice(0,20))},[]),k=(0,l.useCallback)(e=>{f(t=>{let r=t.find(t=>t.id===e)||t[0],a=h.current.find(e=>{var t;return e.id===(null!=(t=r.unitId)?t:h.current[0].id)})||h.current[0],l=a.route;return x({driverId:r.id,unitId:a.id,route:l,startedAt:new Date().toISOString(),fares:[{label:"General",amount:2.5},{label:"Universitario",amount:1.25},{label:"Escolar",amount:1}],transactions:[]}),t.map(e=>e.id===r.id?{...e,onShift:!0,unitId:a.id}:e)})},[]),w=(0,l.useCallback)(()=>{let e={total:0,count:0};return x(t=>(t&&(e.total=t.transactions.reduce((e,t)=>e+(t.amount>0?t.amount:0),0),e.count=t.transactions.length,f(e=>e.map(e=>e.id===t.driverId?{...e,onShift:!1}:e))),null)),e},[]),y=(0,l.useMemo)(()=>({user:r,activity:u,setBalance:v,addActivity:g,buses:h.current,drivers:p,driverSession:b,startShift:k,endShift:w}),[r,u,p,b,v,g,k,w]);return(0,a.jsx)(c.Provider,{value:y,children:t})}let m=()=>{let e=(0,l.useContext)(c);if(!e)throw Error("Store missing Provider");return e}},5112:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var a=r(4564);let l=e=>{let t=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase());return t.charAt(0).toUpperCase()+t.slice(1)},n=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim()};var i={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let s=(0,a.forwardRef)((e,t)=>{let{color:r="currentColor",size:l=24,strokeWidth:s=2,absoluteStrokeWidth:o,className:d="",children:c,iconNode:u,...m}=e;return(0,a.createElement)("svg",{ref:t,...i,width:l,height:l,stroke:r,strokeWidth:o?24*Number(s)/Number(l):s,className:n("lucide",d),...!c&&!(e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0})(m)&&{"aria-hidden":"true"},...m},[...u.map(e=>{let[t,r]=e;return(0,a.createElement)(t,r)}),...Array.isArray(c)?c:[c]])}),o=(e,t)=>{let r=(0,a.forwardRef)((r,i)=>{let{className:o,...d}=r;return(0,a.createElement)(s,{ref:i,iconNode:t,className:n("lucide-".concat(l(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()),"lucide-".concat(e),o),...d})});return r.displayName=l(e),r}},8211:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>o});var a=r(4248),l=r(3827),n=r(5112);let i=(0,n.A)("camera",[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]),s=(0,n.A)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);function o(){let{user:e,setBalance:t,addActivity:r}=(0,l.P)(),n=(0,l.B)("tx");return(0,a.jsxs)("div",{className:"max-w-lg mx-auto card p-6 space-y-4",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold",children:"Escanear QR"}),(0,a.jsx)("div",{className:"aspect-video rounded-xl border border-dashed grid place-items-center text-gray-500",children:(0,a.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,a.jsx)(i,{className:"w-8 h-8"}),(0,a.jsx)("p",{children:"Simulaci\xf3n de c\xe1mara"})]})}),(0,a.jsxs)("button",{onClick:()=>{if(e.balance<2.5)return alert("Saldo insuficiente");t(e.balance-2.5),r({id:n(),type:"ride",label:"Pago de pasaje QR",amount:-2.5,date:new Date().toLocaleString()}),alert("Pago de S/ ".concat("2.50"," realizado con \xe9xito")),history.back()},className:"btn w-full",children:[(0,a.jsx)(s,{className:"w-4 h-4"})," Simular Escaneo Exitoso"]}),(0,a.jsxs)("p",{className:"text-xs text-gray-500",children:["Se descontar\xe1n S/","2.50"," del saldo."]})]})}}},e=>{e.O(0,[647,516,358],()=>e(e.s=3450)),_N_E=e.O()}]);