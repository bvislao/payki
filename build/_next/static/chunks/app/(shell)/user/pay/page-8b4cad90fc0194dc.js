(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[351],{3450:(e,t,r)=>{Promise.resolve().then(r.bind(r,8211))},3827:(e,t,r)=>{"use strict";r.d(t,{Provider:()=>c,B:()=>s,P:()=>m});var a=r(4248),i=r(4564);let l=[{id:"u1",name:"Mar\xeda L\xf3pez",balance:15.5}],n=[{id:"t1",type:"ride",label:"Viaje Corredor Azul",amount:-2.5,date:"2025-10-09 08:21"},{id:"t2",type:"topup",label:"Recarga tarjeta",amount:10,date:"2025-10-08 19:02"}],o=[{id:"b102",plate:"ABC-102",route:"Corredor Azul",driverId:"d1",status:"Activo",pos:{x:25,y:40}},{id:"b207",plate:"XYZ-207",route:"Corredor Rojo",driverId:"d2",status:"Activo",pos:{x:60,y:55}},{id:"b312",plate:"LMN-312",route:"Alimentador Norte",driverId:null,status:"Inactivo",pos:{x:75,y:20}}],d=[{id:"d1",name:"Juan P\xe9rez",unitId:"b102",onShift:!1},{id:"d2",name:"Ana Torres",unitId:"b207",onShift:!0},{id:"d3",name:"Luis Ramos",unitId:null,onShift:!1}];function s(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"id",[t,r]=(0,i.useState)(0);return()=>(r(e=>e+1),"".concat(e,"-").concat(t+1))}let u=(0,i.createContext)(null);function c(e){let{children:t}=e,[r,s]=(0,i.useState)(l[0]),[c,m]=(0,i.useState)(n),[h]=(0,i.useState)(o),[p,v]=(0,i.useState)(d),[x,f]=(0,i.useState)(null),b=e=>s(t=>({...t,balance:Number(e.toFixed(2))})),g=e=>m(t=>[e,...t].slice(0,20)),w=e=>{let t=p.find(t=>t.id===e)||p[0],r=h.find(e=>{var r;return e.id===(null!=(r=t.unitId)?r:h[0].id)})||h[0],a=r.route;v(e=>e.map(e=>e.id===t.id?{...e,onShift:!0,unitId:r.id}:e)),f({driverId:t.id,unitId:r.id,route:a,startedAt:new Date().toISOString(),fares:[{label:"General",amount:2.5},{label:"Universitario",amount:1.25},{label:"Escolar",amount:1}],transactions:[]})},S=()=>{var e,t;let r=null!=(e=null==x?void 0:x.transactions.reduce((e,t)=>e+(t.amount>0?t.amount:0),0))?e:0,a=null!=(t=null==x?void 0:x.transactions.length)?t:0;return v(e=>e.map(e=>e.id===(null==x?void 0:x.driverId)?{...e,onShift:!1}:e)),f(null),{total:r,count:a}},y=(0,i.useMemo)(()=>({user:r,activity:c,setBalance:b,addActivity:g,buses:h,drivers:p,driverSession:x,startShift:w,endShift:S}),[r,c,h,p,x,w,S]);return(0,a.jsx)(u.Provider,{value:y,children:t})}let m=()=>{let e=(0,i.useContext)(u);if(!e)throw Error("Store missing Provider");return e}},5112:(e,t,r)=>{"use strict";r.d(t,{A:()=>d});var a=r(4564);let i=e=>{let t=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase());return t.charAt(0).toUpperCase()+t.slice(1)},l=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim()};var n={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let o=(0,a.forwardRef)((e,t)=>{let{color:r="currentColor",size:i=24,strokeWidth:o=2,absoluteStrokeWidth:d,className:s="",children:u,iconNode:c,...m}=e;return(0,a.createElement)("svg",{ref:t,...n,width:i,height:i,stroke:r,strokeWidth:d?24*Number(o)/Number(i):o,className:l("lucide",s),...!u&&!(e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0})(m)&&{"aria-hidden":"true"},...m},[...c.map(e=>{let[t,r]=e;return(0,a.createElement)(t,r)}),...Array.isArray(u)?u:[u]])}),d=(e,t)=>{let r=(0,a.forwardRef)((r,n)=>{let{className:d,...s}=r;return(0,a.createElement)(o,{ref:n,iconNode:t,className:l("lucide-".concat(i(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()),"lucide-".concat(e),d),...s})});return r.displayName=i(e),r}},8211:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>d});var a=r(4248),i=r(3827),l=r(5112);let n=(0,l.A)("camera",[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]),o=(0,l.A)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);function d(){let{user:e,setBalance:t,addActivity:r}=(0,i.P)(),l=(0,i.B)("tx");return(0,a.jsxs)("div",{className:"max-w-lg mx-auto card p-6 space-y-4",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold",children:"Escanear QR"}),(0,a.jsx)("div",{className:"aspect-video rounded-xl border border-dashed grid place-items-center text-gray-500",children:(0,a.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,a.jsx)(n,{className:"w-8 h-8"}),(0,a.jsx)("p",{children:"Simulaci\xf3n de c\xe1mara"})]})}),(0,a.jsxs)("button",{onClick:()=>{if(e.balance<2.5)return alert("Saldo insuficiente");t(e.balance-2.5),r({id:l(),type:"ride",label:"Pago de pasaje QR",amount:-2.5,date:new Date().toLocaleString()}),alert("Pago de S/ ".concat("2.50"," realizado con \xe9xito")),history.back()},className:"btn w-full",children:[(0,a.jsx)(o,{className:"w-4 h-4"})," Simular Escaneo Exitoso"]}),(0,a.jsxs)("p",{className:"text-xs text-gray-500",children:["Se descontar\xe1n S/","2.50"," del saldo."]})]})}}},e=>{e.O(0,[647,516,358],()=>e(e.s=3450)),_N_E=e.O()}]);