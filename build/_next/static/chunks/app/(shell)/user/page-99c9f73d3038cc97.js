(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[422],{3827:(e,t,a)=>{"use strict";a.d(t,{Provider:()=>u,B:()=>c,P:()=>h});var r=a(4248),s=a(4564);let l=[{id:"u1",name:"Mar\xeda L\xf3pez",balance:15.5}],i=[{id:"t1",type:"ride",label:"Viaje Corredor Azul",amount:-2.5,date:"2025-10-09 08:21"},{id:"t2",type:"topup",label:"Recarga tarjeta",amount:10,date:"2025-10-08 19:02"}],n=[{id:"b102",plate:"ABC-102",route:"Corredor Azul",driverId:"d1",status:"Activo",pos:{x:25,y:40}},{id:"b207",plate:"XYZ-207",route:"Corredor Rojo",driverId:"d2",status:"Activo",pos:{x:60,y:55}},{id:"b312",plate:"LMN-312",route:"Alimentador Norte",driverId:null,status:"Inactivo",pos:{x:75,y:20}}],d=[{id:"d1",name:"Juan P\xe9rez",unitId:"b102",onShift:!1},{id:"d2",name:"Ana Torres",unitId:"b207",onShift:!0},{id:"d3",name:"Luis Ramos",unitId:null,onShift:!1}];function c(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"id",t=(0,s.useRef)(0);return(0,s.useCallback)(()=>{let a="".concat(e,"-").concat(t.current);return t.current+=1,a},[e])}let o=(0,s.createContext)(null);function u(e){let{children:t}=e,[a,c]=(0,s.useState)(l[0]),[u,h]=(0,s.useState)(i),m=(0,s.useRef)(n),[x,p]=(0,s.useState)(d),[y,v]=(0,s.useState)(null),k=(0,s.useCallback)(e=>{c(t=>({...t,balance:Number(e.toFixed(2))}))},[]),f=(0,s.useCallback)(e=>{h(t=>[e,...t].slice(0,20))},[]),j=(0,s.useCallback)(e=>{p(t=>{let a=t.find(t=>t.id===e)||t[0],r=m.current.find(e=>{var t;return e.id===(null!=(t=a.unitId)?t:m.current[0].id)})||m.current[0],s=r.route;return v({driverId:a.id,unitId:r.id,route:s,startedAt:new Date().toISOString(),fares:[{label:"General",amount:2.5},{label:"Universitario",amount:1.25},{label:"Escolar",amount:1}],transactions:[]}),t.map(e=>e.id===a.id?{...e,onShift:!0,unitId:r.id}:e)})},[]),b=(0,s.useCallback)(()=>{let e={total:0,count:0};return v(t=>(t&&(e.total=t.transactions.reduce((e,t)=>e+(t.amount>0?t.amount:0),0),e.count=t.transactions.length,p(e=>e.map(e=>e.id===t.driverId?{...e,onShift:!1}:e))),null)),e},[]),g=(0,s.useMemo)(()=>({user:a,activity:u,setBalance:k,addActivity:f,buses:m.current,drivers:x,driverSession:y,startShift:j,endShift:b}),[a,u,x,y,k,f,j,b]);return(0,r.jsx)(o.Provider,{value:g,children:t})}let h=()=>{let e=(0,s.useContext)(o);if(!e)throw Error("Store missing Provider");return e}},4091:(e,t,a)=>{Promise.resolve().then(a.bind(a,7182))},5112:(e,t,a)=>{"use strict";a.d(t,{A:()=>d});var r=a(4564);let s=e=>{let t=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,a)=>a?a.toUpperCase():t.toLowerCase());return t.charAt(0).toUpperCase()+t.slice(1)},l=function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return t.filter((e,t,a)=>!!e&&""!==e.trim()&&a.indexOf(e)===t).join(" ").trim()};var i={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let n=(0,r.forwardRef)((e,t)=>{let{color:a="currentColor",size:s=24,strokeWidth:n=2,absoluteStrokeWidth:d,className:c="",children:o,iconNode:u,...h}=e;return(0,r.createElement)("svg",{ref:t,...i,width:s,height:s,stroke:a,strokeWidth:d?24*Number(n)/Number(s):n,className:l("lucide",c),...!o&&!(e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0})(h)&&{"aria-hidden":"true"},...h},[...u.map(e=>{let[t,a]=e;return(0,r.createElement)(t,a)}),...Array.isArray(o)?o:[o]])}),d=(e,t)=>{let a=(0,r.forwardRef)((a,i)=>{let{className:d,...c}=a;return(0,r.createElement)(n,{ref:i,iconNode:t,className:l("lucide-".concat(s(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()),"lucide-".concat(e),d),...c})});return a.displayName=s(e),a}},5994:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(5112).A)("bus",[["path",{d:"M8 6v6",key:"18i7km"}],["path",{d:"M15 6v6",key:"1sg6z9"}],["path",{d:"M2 12h19.6",key:"de5uta"}],["path",{d:"M18 18h3s.5-1.7.8-2.8c.1-.4.2-.8.2-1.2 0-.4-.1-.8-.2-1.2l-1.4-5C20.1 6.8 19.1 6 18 6H4a2 2 0 0 0-2 2v10h3",key:"1wwztk"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}],["path",{d:"M9 18h5",key:"lrx6i"}],["circle",{cx:"16",cy:"18",r:"2",key:"1v4tcr"}]])},7182:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>v});var r=a(4248),s=a(7642),l=a.n(s),i=a(5112);let n=(0,i.A)("qr-code",[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]]),d=(0,i.A)("circle-plus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);var c=a(3827);let o=(0,i.A)("arrow-up-right",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]),u=(0,i.A)("arrow-down-right",[["path",{d:"m7 7 10 10",key:"1fmybs"}],["path",{d:"M17 7v10H7",key:"6fjiku"}]]);var h=a(8114);function m(){let{activity:e}=(0,c.P)();return(0,r.jsxs)("div",{className:"card p-4",children:[(0,r.jsx)("h3",{className:"font-semibold mb-3",children:"Actividad Reciente"}),(0,r.jsx)("ul",{className:"space-y-2",children:e.map(e=>(0,r.jsxs)("li",{className:"flex items-center justify-between textsm",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:["topup"===e.type?(0,r.jsx)(o,{className:"w-4 h-4"}):(0,r.jsx)(u,{className:"w-4 h-4"}),(0,r.jsx)("span",{children:e.label})]}),(0,r.jsxs)("div",{className:"flex items-center gap-3 text-gray-500",children:[(0,r.jsxs)("span",{className:e.amount>0?"text-green-600":"text-red-600",children:[e.amount>0?"+":"-","S/ ",Math.abs(e.amount).toFixed(2)]}),(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)(h.A,{className:"w-3 h-3"}),(0,r.jsx)("span",{children:e.date})]})]})]},e.id))})]})}var x=a(8556),p=a(5994);function y(){let{buses:e}=(0,c.P)();return(0,r.jsxs)("div",{className:"card p-4",children:[(0,r.jsx)("h3",{className:"font-semibold mb-3",children:"Unidades Cercanas (simulado)"}),(0,r.jsxs)("div",{className:"relative h-64 w-full rounded-xl bg-gradient-to-br fromsky-100 to-emerald-100 dark:from-sky-900/40 dark:to-emerald-900/30 overflowhidden",children:[(0,r.jsxs)("div",{className:"absolute left-[45%] top-[60%] -translate-x-1/2 - translate-y-1/2 flex items-center gap-1 text-xs",children:[(0,r.jsx)(x.A,{className:"w-5 h-5 text-payki-600"}),(0,r.jsx)("span",{children:"T\xfa"})]}),e.map(e=>(0,r.jsx)("div",{className:"absolute",style:{left:"".concat(e.pos.x,"%"),top:"".concat(e.pos.y,"%")},children:(0,r.jsxs)("div",{className:"flex items-center gap-1 text-xs",children:[(0,r.jsx)(p.A,{className:"w-4 h-4"})," ",(0,r.jsx)("span",{children:e.id})]})},e.id))]})]})}function v(){let{user:e}=(0,c.P)();return(0,r.jsxs)("div",{className:"grid lg:grid-cols-3 gap-6",children:[(0,r.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,r.jsxs)("div",{className:"card p-6 flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("p",{className:"text-sm text-gray-500",children:["Hola, ",e.name.split(" ")[0]," "]}),(0,r.jsx)("h2",{className:"text-2xl font-semibold mt-1",children:"Saldo actual"}),(0,r.jsxs)("p",{className:"text-3xl font-bold text-payki-600",children:["S/",e.balance.toFixed(2)]})]}),(0,r.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,r.jsxs)(l(),{className:"btn",href:"/user/pay/",children:[(0,r.jsx)(n,{className:"w-4 h-4"})," Pagar Pasaje (QR)"]}),(0,r.jsxs)(l(),{className:"btn-outline",href:"/user/recharge/",children:[(0,r.jsx)(d,{className:"w-4 h-4"})," Recargar Saldo"]})]})]}),(0,r.jsx)(m,{})]}),(0,r.jsx)("div",{children:(0,r.jsx)(y,{})})]})}},8114:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(5112).A)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]])},8556:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(5112).A)("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])}},e=>{e.O(0,[642,647,516,358],()=>e(e.s=4091)),_N_E=e.O()}]);