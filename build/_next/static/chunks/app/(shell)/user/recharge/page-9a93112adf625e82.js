(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[418],{2786:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>i});var r=a(4248),l=a(4564),n=a(3827);function i(){let{user:e,setBalance:t,addActivity:a}=(0,n.P)(),i=(0,n.B)("tx"),[s,o]=(0,l.useState)(10),[d,u]=(0,l.useState)("4111111111111111"),[c,m]=(0,l.useState)("12/28"),[b,p]=(0,l.useState)("123");return(0,r.jsxs)("form",{onSubmit:r=>{r.preventDefault();let l=Number(s);if(!l||l<=0)return alert("Monto inv\xe1lido");t(e.balance+l),a({id:i(),type:"topup",label:"Recarga con tarjeta",amount:l,date:new Date().toLocaleString()}),alert("Recarga realizada "),history.back()},className:"max-w-lg mx-auto card p-6 spacey-4",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold",children:"Recargar saldo"}),(0,r.jsxs)("label",{className:"block text-sm",children:["Monto (S/)",(0,r.jsx)("input",{className:"mt-1 w-full rounded-xl border px-3 py-2 bg-white dark:bg-gray-900",type:"number",step:"0.5",min:"1",value:s,onChange:e=>o(Number(e.target.value))})]}),(0,r.jsxs)("label",{className:"block text-sm",children:["N\xfamero de Tarjeta",(0,r.jsx)("input",{className:"mt-1 w-full rounded-xl border px-3 py-2 bg-white dark:bg-gray-900",value:d,onChange:e=>u(e.target.value)})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,r.jsxs)("label",{className:"block text-sm",children:["Vencimiento",(0,r.jsx)("input",{className:"mt-1 w-full rounded-xl border px-3 py-2 bg-white dark:bg-gray-900",value:c,onChange:e=>m(e.target.value)})]}),(0,r.jsxs)("label",{className:"block text-sm",children:["CVV",(0,r.jsx)("input",{className:"mt-1 w-full rounded-xl border px-3 py-2 bg-white dark:bg-gray-900",value:b,onChange:e=>p(e.target.value)})]})]}),(0,r.jsx)("button",{className:"btn w-full",type:"submit",children:"Confirmar Recarga"})]})}},3827:(e,t,a)=>{"use strict";a.d(t,{Provider:()=>c,B:()=>d,P:()=>m});var r=a(4248),l=a(4564);let n=[{id:"u1",name:"Mar\xeda L\xf3pez",balance:15.5}],i=[{id:"t1",type:"ride",label:"Viaje Corredor Azul",amount:-2.5,date:"2025-10-09 08:21"},{id:"t2",type:"topup",label:"Recarga tarjeta",amount:10,date:"2025-10-08 19:02"}],s=[{id:"b102",plate:"ABC-102",route:"Corredor Azul",driverId:"d1",status:"Activo",pos:{x:25,y:40}},{id:"b207",plate:"XYZ-207",route:"Corredor Rojo",driverId:"d2",status:"Activo",pos:{x:60,y:55}},{id:"b312",plate:"LMN-312",route:"Alimentador Norte",driverId:null,status:"Inactivo",pos:{x:75,y:20}}],o=[{id:"d1",name:"Juan P\xe9rez",unitId:"b102",onShift:!1},{id:"d2",name:"Ana Torres",unitId:"b207",onShift:!0},{id:"d3",name:"Luis Ramos",unitId:null,onShift:!1}];function d(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"id",[t,a]=(0,l.useState)(0);return()=>(a(e=>e+1),"".concat(e,"-").concat(t+1))}let u=(0,l.createContext)(null);function c(e){let{children:t}=e,[a,d]=(0,l.useState)(n[0]),[c,m]=(0,l.useState)(i),[b]=(0,l.useState)(s),[p,x]=(0,l.useState)(o),[g,v]=(0,l.useState)(null),h=e=>d(t=>({...t,balance:Number(e.toFixed(2))})),f=e=>m(t=>[e,...t].slice(0,20)),N=e=>{let t=p.find(t=>t.id===e)||p[0],a=b.find(e=>{var a;return e.id===(null!=(a=t.unitId)?a:b[0].id)})||b[0],r=a.route;x(e=>e.map(e=>e.id===t.id?{...e,onShift:!0,unitId:a.id}:e)),v({driverId:t.id,unitId:a.id,route:r,startedAt:new Date().toISOString(),fares:[{label:"General",amount:2.5},{label:"Universitario",amount:1.25},{label:"Escolar",amount:1}],transactions:[]})},S=()=>{var e,t;let a=null!=(e=null==g?void 0:g.transactions.reduce((e,t)=>e+(t.amount>0?t.amount:0),0))?e:0,r=null!=(t=null==g?void 0:g.transactions.length)?t:0;return x(e=>e.map(e=>e.id===(null==g?void 0:g.driverId)?{...e,onShift:!1}:e)),v(null),{total:a,count:r}},j=(0,l.useMemo)(()=>({user:a,activity:c,setBalance:h,addActivity:f,buses:b,drivers:p,driverSession:g,startShift:N,endShift:S}),[a,c,b,p,g,N,S]);return(0,r.jsx)(u.Provider,{value:j,children:t})}let m=()=>{let e=(0,l.useContext)(u);if(!e)throw Error("Store missing Provider");return e}},8283:(e,t,a)=>{Promise.resolve().then(a.bind(a,2786))}},e=>{e.O(0,[647,516,358],()=>e(e.s=8283)),_N_E=e.O()}]);