(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[584],{451:(e,r,t)=>{"use strict";t.d(r,{A:()=>s});var a=t(4248),l=t(9661);function s(e){let{role:r,children:t}=e,{userId:s,profile:i,loading:n}=(0,l.A)();return n?(0,a.jsx)("div",{className:"card p-6",children:"Cargandoâ€¦"}):s?i?"passenger"===r&&"passenger"!==i.role?(0,a.jsx)("div",{className:"card p-6",children:"Solo para pasajeros."}):"driver"===r&&"driver"!==i.role?(0,a.jsx)("div",{className:"card p-6",children:"Solo para conductores."}):"admin"===r&&"admin"!==i.role?(0,a.jsx)("div",{className:"card p-6",children:"Solo admins."}):(0,a.jsx)(a.Fragment,{children:t}):(0,a.jsx)("div",{className:"card p-6",children:"Perfil no encontrado."}):(0,a.jsx)("div",{className:"card p-6",children:"Inicia sesi\xf3n."})}},6037:(e,r,t)=>{Promise.resolve().then(t.bind(t,8087))},8087:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>u});var a=t(4248),l=t(451),s=t(4564);let i=e=>{let r=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,r,t)=>t?t.toUpperCase():r.toLowerCase());return r.charAt(0).toUpperCase()+r.slice(1)},n=function(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return r.filter((e,r,t)=>!!e&&""!==e.trim()&&t.indexOf(e)===r).join(" ").trim()};var c={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let d=(0,s.forwardRef)((e,r)=>{let{color:t="currentColor",size:a=24,strokeWidth:l=2,absoluteStrokeWidth:i,className:d="",children:o,iconNode:u,...h}=e;return(0,s.createElement)("svg",{ref:r,...c,width:a,height:a,stroke:t,strokeWidth:i?24*Number(l)/Number(a):l,className:n("lucide",d),...!o&&!(e=>{for(let r in e)if(r.startsWith("aria-")||"role"===r||"title"===r)return!0})(h)&&{"aria-hidden":"true"},...h},[...u.map(e=>{let[r,t]=e;return(0,s.createElement)(r,t)}),...Array.isArray(o)?o:[o]])}),o=((e,r)=>{let t=(0,s.forwardRef)((t,a)=>{let{className:l,...c}=t;return(0,s.createElement)(d,{ref:a,iconNode:r,className:n("lucide-".concat(i(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()),"lucide-".concat(e),l),...c})});return t.displayName=i(e),t})("bus",[["path",{d:"M8 6v6",key:"18i7km"}],["path",{d:"M15 6v6",key:"1sg6z9"}],["path",{d:"M2 12h19.6",key:"de5uta"}],["path",{d:"M18 18h3s.5-1.7.8-2.8c.1-.4.2-.8.2-1.2 0-.4-.1-.8-.2-1.2l-1.4-5C20.1 6.8 19.1 6 18 6H4a2 2 0 0 0-2 2v10h3",key:"1wwztk"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}],["path",{d:"M9 18h5",key:"lrx6i"}],["circle",{cx:"16",cy:"18",r:"2",key:"1v4tcr"}]]);function u(){return(0,a.jsx)(l.A,{role:"passenger",children:(0,a.jsxs)("div",{className:"card p-6 space-y-3",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold",children:"Unidades cercanas"}),(0,a.jsxs)("div",{className:"relative w-full h-72 rounded-2xl border bg-gray-100 dark:bg-gray-900 overflow-hidden",children:[(0,a.jsxs)("div",{className:"absolute -translate-x-1/2 -translate-y-1/2",style:{left:"".concat(50,"%"),top:"".concat(50,"%")},children:[(0,a.jsx)("div",{className:"w-3 h-3 rounded-full bg-payki-600 border-2 border-white shadow"}),(0,a.jsx)("div",{className:"text-[10px] mt-1 text-gray-600",children:"T\xfa"})]}),[{id:"B-102",x:30,y:40},{id:"B-205",x:55,y:20},{id:"B-311",x:70,y:65}].map(e=>(0,a.jsxs)("div",{className:"absolute -translate-x-1/2 -translate-y-1/2",style:{left:"".concat(e.x,"%"),top:"".concat(e.y,"%")},children:[(0,a.jsx)(o,{className:"w-5 h-5"}),(0,a.jsx)("div",{className:"text-[10px] mt-1 text-gray-600",children:e.id})]},e.id))]})]})})}},9410:(e,r,t)=>{"use strict";t.d(r,{N:()=>a});let a=(0,t(5835).createBrowserClient)("https://exyxexamvwfvwxjjfqpl.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImV4eXhleGFtdndmdnd4ampmcXBsIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTkyNDc5MzEsImV4cCI6MjA3NDgyMzkzMX0.JW0haLRNKznqB0C5zMx9wF7_u6RTZQsD6WwgqpHHVIU")},9661:(e,r,t)=>{"use strict";t.d(r,{A:()=>c,AuthProvider:()=>n});var a=t(4248),l=t(4564),s=t(9410);let i=(0,l.createContext)(null);function n(e){let{children:r}=e,[t,n]=(0,l.useState)(null),[c,d]=(0,l.useState)(null),[o,u]=(0,l.useState)(null),[h,p]=(0,l.useState)(!0),m=async(e,r)=>{let{data:t}=await s.N.from("profiles").select("*").eq("id",e).maybeSingle();if(t)return void u(t);let{data:a,error:l}=await s.N.rpc("ensure_profile",{p_id:e,p_email:null!=r?r:""});if(l){console.error("[ensure_profile rpc] error",l),u(null);return}u(null!=a?a:null)};(0,l.useEffect)(()=>{(async()=>{var e,r,t,a,l,i;let{data:c}=await s.N.auth.getSession(),o=null!=(l=null==(r=c.session)||null==(e=r.user)?void 0:e.id)?l:null,u=null!=(i=null==(a=c.session)||null==(t=a.user)?void 0:t.email)?i:null;n(o),d(u),o&&await m(o,u),p(!1)})();let{data:e}=s.N.auth.onAuthStateChange(async(e,r)=>{var t,a,l,s;let i=null!=(l=null==r||null==(t=r.user)?void 0:t.id)?l:null,c=null!=(s=null==r||null==(a=r.user)?void 0:a.email)?s:null;n(i),d(c),i?await m(i,c):u(null)});return()=>{e.subscription.unsubscribe()}},[]);let x=async()=>{await s.N.auth.signOut()};return(0,a.jsx)(i.Provider,{value:{userId:t,email:c,profile:o,loading:h,signOut:x},children:r})}let c=()=>{let e=(0,l.useContext)(i);if(!e)throw Error("AuthProvider missing");return e}}},e=>{e.O(0,[835,647,516,358],()=>e(e.s=6037)),_N_E=e.O()}]);