(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[399],{1327:(e,t,r)=>{Promise.resolve().then(r.bind(r,3827)),Promise.resolve().then(r.t.bind(r,7642,23)),Promise.resolve().then(r.t.bind(r,5763,23))},3827:(e,t,r)=>{"use strict";r.d(t,{Provider:()=>c,B:()=>u,P:()=>v});var n=r(4248),i=r(4564);let a=[{id:"u1",name:"Mar\xeda L\xf3pez",balance:15.5}],o=[{id:"t1",type:"ride",label:"Viaje Corredor Azul",amount:-2.5,date:"2025-10-09 08:21"},{id:"t2",type:"topup",label:"Recarga tarjeta",amount:10,date:"2025-10-08 19:02"}],d=[{id:"b102",plate:"ABC-102",route:"Corredor Azul",driverId:"d1",status:"Activo",pos:{x:25,y:40}},{id:"b207",plate:"XYZ-207",route:"Corredor Rojo",driverId:"d2",status:"Activo",pos:{x:60,y:55}},{id:"b312",plate:"LMN-312",route:"Alimentador Norte",driverId:null,status:"Inactivo",pos:{x:75,y:20}}],l=[{id:"d1",name:"Juan P\xe9rez",unitId:"b102",onShift:!1},{id:"d2",name:"Ana Torres",unitId:"b207",onShift:!0},{id:"d3",name:"Luis Ramos",unitId:null,onShift:!1}];function u(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"id",[t,r]=(0,i.useState)(0);return()=>(r(e=>e+1),"".concat(e,"-").concat(t+1))}let s=(0,i.createContext)(null);function c(e){let{children:t}=e,[r,u]=(0,i.useState)(a[0]),[c,v]=(0,i.useState)(o),[m]=(0,i.useState)(d),[b,p]=(0,i.useState)(l),[h,S]=(0,i.useState)(null),f=e=>u(t=>({...t,balance:Number(e.toFixed(2))})),I=e=>v(t=>[e,...t].slice(0,20)),A=e=>{let t=b.find(t=>t.id===e)||b[0],r=m.find(e=>{var r;return e.id===(null!=(r=t.unitId)?r:m[0].id)})||m[0],n=r.route;p(e=>e.map(e=>e.id===t.id?{...e,onShift:!0,unitId:r.id}:e)),S({driverId:t.id,unitId:r.id,route:n,startedAt:new Date().toISOString(),fares:[{label:"General",amount:2.5},{label:"Universitario",amount:1.25},{label:"Escolar",amount:1}],transactions:[]})},C=()=>{var e,t;let r=null!=(e=null==h?void 0:h.transactions.reduce((e,t)=>e+(t.amount>0?t.amount:0),0))?e:0,n=null!=(t=null==h?void 0:h.transactions.length)?t:0;return p(e=>e.map(e=>e.id===(null==h?void 0:h.driverId)?{...e,onShift:!1}:e)),S(null),{total:r,count:n}},P=(0,i.useMemo)(()=>({user:r,activity:c,setBalance:f,addActivity:I,buses:m,drivers:b,driverSession:h,startShift:A,endShift:C}),[r,c,m,b,h,A,C]);return(0,n.jsx)(s.Provider,{value:P,children:t})}let v=()=>{let e=(0,i.useContext)(s);if(!e)throw Error("Store missing Provider");return e}},5763:()=>{}},e=>{e.O(0,[360,642,647,516,358],()=>e(e.s=1327)),_N_E=e.O()}]);