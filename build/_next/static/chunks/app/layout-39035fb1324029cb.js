(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{1327:(e,t,r)=>{Promise.resolve().then(r.bind(r,3827)),Promise.resolve().then(r.t.bind(r,7642,23)),Promise.resolve().then(r.t.bind(r,5763,23))},3827:(e,t,r)=>{"use strict";r.d(t,{Provider:()=>c,B:()=>d,P:()=>b});var n=r(4248),a=r(4564);let i=[{id:"u1",name:"Mar\xeda L\xf3pez",balance:15.5}],u=[{id:"t1",type:"ride",label:"Viaje Corredor Azul",amount:-2.5,date:"2025-10-09 08:21"},{id:"t2",type:"topup",label:"Recarga tarjeta",amount:10,date:"2025-10-08 19:02"}],o=[{id:"b102",plate:"ABC-102",route:"Corredor Azul",driverId:"d1",status:"Activo",pos:{x:25,y:40}},{id:"b207",plate:"XYZ-207",route:"Corredor Rojo",driverId:"d2",status:"Activo",pos:{x:60,y:55}},{id:"b312",plate:"LMN-312",route:"Alimentador Norte",driverId:null,status:"Inactivo",pos:{x:75,y:20}}],l=[{id:"d1",name:"Juan P\xe9rez",unitId:"b102",onShift:!1},{id:"d2",name:"Ana Torres",unitId:"b207",onShift:!0},{id:"d3",name:"Luis Ramos",unitId:null,onShift:!1}];function d(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"id",t=(0,a.useRef)(0);return(0,a.useCallback)(()=>{let r="".concat(e,"-").concat(t.current);return t.current+=1,r},[e])}let s=(0,a.createContext)(null);function c(e){let{children:t}=e,[r,d]=(0,a.useState)(i[0]),[c,b]=(0,a.useState)(u),m=(0,a.useRef)(o),[v,p]=(0,a.useState)(l),[f,h]=(0,a.useState)(null),C=(0,a.useCallback)(e=>{d(t=>({...t,balance:Number(e.toFixed(2))}))},[]),I=(0,a.useCallback)(e=>{b(t=>[e,...t].slice(0,20))},[]),S=(0,a.useCallback)(e=>{p(t=>{let r=t.find(t=>t.id===e)||t[0],n=m.current.find(e=>{var t;return e.id===(null!=(t=r.unitId)?t:m.current[0].id)})||m.current[0],a=n.route;return h({driverId:r.id,unitId:n.id,route:a,startedAt:new Date().toISOString(),fares:[{label:"General",amount:2.5},{label:"Universitario",amount:1.25},{label:"Escolar",amount:1}],transactions:[]}),t.map(e=>e.id===r.id?{...e,onShift:!0,unitId:n.id}:e)})},[]),k=(0,a.useCallback)(()=>{let e={total:0,count:0};return h(t=>(t&&(e.total=t.transactions.reduce((e,t)=>e+(t.amount>0?t.amount:0),0),e.count=t.transactions.length,p(e=>e.map(e=>e.id===t.driverId?{...e,onShift:!1}:e))),null)),e},[]),A=(0,a.useMemo)(()=>({user:r,activity:c,setBalance:C,addActivity:I,buses:m.current,drivers:v,driverSession:f,startShift:S,endShift:k}),[r,c,v,f,C,I,S,k]);return(0,n.jsx)(s.Provider,{value:A,children:t})}let b=()=>{let e=(0,a.useContext)(s);if(!e)throw Error("Store missing Provider");return e}},5763:()=>{}},e=>{e.O(0,[360,642,647,516,358],()=>e(e.s=1327)),_N_E=e.O()}]);